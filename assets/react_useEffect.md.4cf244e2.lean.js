import{o as n,g as s,G as a}from"./framework.e6884fad.js";const d='{"title":"useEffect \u89C4\u5219","description":"","frontmatter":{},"headers":[{"level":2,"title":"useEffect \u89C4\u5219","slug":"useeffect-\u89C4\u5219"},{"level":2,"title":"\u53C2\u6570\u7684\u89C4\u5219","slug":"\u53C2\u6570\u7684\u89C4\u5219"},{"level":2,"title":"\u4E0D\u540C\u503C\u7684\u53C2\u6570","slug":"\u4E0D\u540C\u503C\u7684\u53C2\u6570"},{"level":3,"title":"\u4E0D\u4F20\u53C2\u6570","slug":"\u4E0D\u4F20\u53C2\u6570"},{"level":3,"title":"\u7A7A\u6570\u7EC4","slug":"\u7A7A\u6570\u7EC4"},{"level":3,"title":"\u4E00\u4E2A\u503C\u7684\u6570\u7EC4","slug":"\u4E00\u4E2A\u503C\u7684\u6570\u7EC4"},{"level":3,"title":"\u591A\u4E2A\u503C\u7684\u6570\u7EC4","slug":"\u591A\u4E2A\u503C\u7684\u6570\u7EC4"},{"level":2,"title":"\u4E00\u4E2A\u4F8B\u5B50","slug":"\u4E00\u4E2A\u4F8B\u5B50"}],"relativePath":"react/useEffect.md","lastUpdated":1684145589865}',t={},p=a(`__VP_STATIC_START__<h2 id="useeffect-\u89C4\u5219"><a class="header-anchor" href="#useeffect-\u89C4\u5219" aria-hidden="true">#</a> useEffect \u89C4\u5219</h2><ul><li>\u5728\u6BCF\u6B21 render \u4E4B\u540E\u6267\u884C</li><li>\u63A5\u53D7\u7B2C\u4E8C\u4E2A\u53C2\u6570\u6765\u63A7\u5236\u8DF3\u8FC7\u6267\u884C\uFF0C\u4E0B\u6B21 render \u540E\u5982\u679C\u6307\u5B9A\u7684\u503C\u6CA1\u6709\u53D8\u5316\u5C31\u4E0D\u4F1A\u6267\u884C</li><li>useEffect \u662F\u5728 render \u4E4B\u540E\u6D4F\u89C8\u5668\u5DF2\u7ECF\u6E32\u67D3\u7ED3\u675F\u624D\u6267\u884C</li></ul><h2 id="\u53C2\u6570\u7684\u89C4\u5219"><a class="header-anchor" href="#\u53C2\u6570\u7684\u89C4\u5219" aria-hidden="true">#</a> \u53C2\u6570\u7684\u89C4\u5219</h2><ul><li>\u5B83\u662F\u53EF\u9009\u7684</li><li>\u7C7B\u578B\u662F\u4E00\u4E2A\u6570\u7EC4</li><li>\u5B83\u7684\u503C\u5E94\u8BE5\u662F props \u6216 state</li></ul><h2 id="\u4E0D\u540C\u503C\u7684\u53C2\u6570"><a class="header-anchor" href="#\u4E0D\u540C\u503C\u7684\u53C2\u6570" aria-hidden="true">#</a> \u4E0D\u540C\u503C\u7684\u53C2\u6570</h2><ul><li>\u4E0D\u4F20\u53C2\u6570</li><li>\u7A7A\u6570\u7EC4</li><li>\u4E00\u4E2A\u503C\u7684\u6570\u7EC4</li><li>\u591A\u4E2A\u503C\u7684\u6570\u7EC4</li></ul><h3 id="\u4E0D\u4F20\u53C2\u6570"><a class="header-anchor" href="#\u4E0D\u4F20\u53C2\u6570" aria-hidden="true">#</a> \u4E0D\u4F20\u53C2\u6570</h3><div class="language-jsx"><pre><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;useEffect with no dependency&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>\u5982\u4E0A\u6240\u793A\uFF0C\u9ED8\u8BA4\u7684\u884C\u4E3A\uFF0C\u4F1A\u6BCF\u6B21 render \u540E\u90FD\u6267\u884C</p><h3 id="\u7A7A\u6570\u7EC4"><a class="header-anchor" href="#\u7A7A\u6570\u7EC4" aria-hidden="true">#</a> \u7A7A\u6570\u7EC4</h3><div class="language-jsx"><pre><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;useEffect with empty dependency&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>\u4F20\u5165\u7B2C\u4E8C\u4E2A\u53C2\u6570\uFF0C\u6BCF\u6B21 render \u540E\u6BD4\u8F83\u6570\u7EC4\u7684\u503C\u6CA1\u53D8\u5316\uFF0C\u4E0D\u4F1A\u5728\u6267\u884C\uFF0C\u7B49\u540C\u4E8E\u7C7B\u7EC4\u4EF6\u4E2D\u7684 componentDidMount</p><h3 id="\u4E00\u4E2A\u503C\u7684\u6570\u7EC4"><a class="header-anchor" href="#\u4E00\u4E2A\u503C\u7684\u6570\u7EC4" aria-hidden="true">#</a> \u4E00\u4E2A\u503C\u7684\u6570\u7EC4</h3><div class="language-jsx"><pre><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;useEffect widh specify dependency&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>\u4F20\u5165\u7B2C\u4E8C\u4E2A\u53C2\u6570\uFF0C\u53EA\u6709\u4E00\u4E2A\u503C\uFF0C\u6BD4\u8F83\u8BE5\u503C\u6709\u53D8\u5316\u5C31\u6267\u884C</p><h3 id="\u591A\u4E2A\u503C\u7684\u6570\u7EC4"><a class="header-anchor" href="#\u591A\u4E2A\u503C\u7684\u6570\u7EC4" aria-hidden="true">#</a> \u591A\u4E2A\u503C\u7684\u6570\u7EC4</h3><div class="language-jsx"><pre><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;useEffect widh specify dependency&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>id<span class="token punctuation">,</span> name<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>\u4F20\u5165\u7B2C\u4E8C\u4E2A\u53C2\u6570\uFF0C\u67092\u4E2A\u503C\u7684\u6570\u7EC4\uFF0C\u4F1A\u6BD4\u8F83\u6BCF\u4E00\u4E2A\u503C\uFF0C\u6709\u4E00\u4E2A\u4E0D\u76F8\u7B49\u5C31\u6267\u884C</p><h2 id="\u4E00\u4E2A\u4F8B\u5B50"><a class="header-anchor" href="#\u4E00\u4E2A\u4F8B\u5B50" aria-hidden="true">#</a> \u4E00\u4E2A\u4F8B\u5B50</h2><div class="language-jsx"><pre><code><span class="token keyword">function</span> <span class="token function">Detail</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span> name<span class="token punctuation">,</span> setName <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setName</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        EventCenter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">,</span> onLoad<span class="token punctuation">)</span>
        
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            EventCenter<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">,</span> onLoad<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span><span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-jsx"><pre><code><span class="token comment">// \u793A\u4F8B\u4E8C</span>
<span class="token keyword">function</span> <span class="token function">Goods</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span> name<span class="token punctuation">,</span> setName <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">fetchApi</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token function">setName</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span><span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>__VP_STATIC_END__`,21);function o(e,c,u,l,i,k){return n(),s("div",null,[p])}t.render=o;export{d as __pageData,t as default};
